<div *ngIf="goods" class="wrap sub end">
  <header>
    <h1><a [routerLink]="['/', market]">세컨드마켓</a></h1>
    <a href="#" (click)="goBack($event)" class="back">
      <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><path d="M30.83 32.67l-9.17-9.17 9.17-9.17L28 11.5l-12 12 12 12z"/></svg>
      <span>{{market === 'group' ? groupName : '2nd Lounge'}}</span>
    </a>
    <a routerLink="/preference/notification" class="user-alarm svg-lineType on">
      <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" class="new"><path fill="#010101" d="M24 44c2.21 0 4-1.79 4-4h-8c0 2.21 1.79 4 4 4zm12-12V22c0-6.15-3.27-11.28-9-12.64V8c0-1.66-1.34-3-3-3s-3 1.34-3 3v1.36c-5.73 1.36-9 6.49-9 12.64v10l-4 4v2h32v-2l-4-4z"/></svg>
      <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" class="new"><path fill="#010101" d="M24 44c2.21 0 4-1.79 4-4h-8c0 2.21 1.79 4 4 4zm12-12V22c0-6.15-3.27-11.28-9-12.64V8c0-1.66-1.34-3-3-3s-3 1.34-3 3v1.36c-5.73 1.36-9 6.49-9 12.64v10l-4 4v2h32v-2l-4-4z"/></svg>
    </a>
    <!-- <button type="button" class="star" [ngClass]="{ on: interested }" (click)="onClickInterest()">
      <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><path d="M24 42.7l-2.9-2.63C10.8 30.72 4 24.55 4 17 4 10.83 8.83 6 15 6c3.48 0 6.82 1.62 9 4.17C26.18 7.62 29.52 6 33 6c6.17 0 11 4.83 11 11 0 7.55-6.8 13.72-17.1 23.07L24 42.7z"/></svg>
    </button> -->
    <!-- <a [routerLink]="['/', market]" class="home"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><path d="M20 40V28h8v12h10V24h6L24 6 4 24h6v16z"/></svg></a> -->
    <div *ngIf="authority" class="sub_utility">
      <span class="goods_modify svg-lineType on">
        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3c-1.22.51-2.35 1.17-3.38 1.97L9.9 10.1c-.45-.17-.97 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3c1.22-.51 2.35-1.17 3.38-1.97l4.98 2.01c.45.17.97 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3c-1.22.51-2.35 1.17-3.38 1.97L9.9 10.1c-.45-.17-.97 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3c1.22-.51 2.35-1.17 3.38-1.97l4.98 2.01c.45.17.97 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/></svg>
      </span>
      <select (change)="onMenuChange($event.target.value)">
        <option disabled selected value>[선택]</option>
        <option value="edit">수정</option>
        <option value="delete">삭제</option>
        <option *ngIf="!goods.soldOut" value="soldOut">판매완료</option>
        <option *ngIf="goods.soldOut" value="onSale">판매중</option>
      </select>
    </div>
  </header>
  <div class="single-item">
    <img [src]="goods.images[0]" width="100%" alt="" style="vertical-align:top;">
  </div>
  <h3 class="goods-name">
    <span class="goods-name-bg">
      <!-- <button
        (click)="onClickInterest()"
        [ngClass]="{ 'likeit': true, 'on': interested }" style="border:0"><span class="sr-only">관심</span></button> -->
      {{ goods.title }}
    </span>
    <span *ngIf="goods.soldOut" class="soldout type1"></span>
  </h3>
  <section class="goods_section">
    <dl class="goods_price">
      <dt>판매가</dt>
      <dd><strong>{{ goods.price | number:'2.' }}</strong>원</dd>
    </dl>

    <div class="goods_info_area">
      <dl class="goods_info">
        <dt>사용기간</dt>
        <dd>{{ goods.purchase }}</dd>
      </dl>
      <dl class="goods_info">
        <dt>사용상태</dt>
        <dd>{{ goods.condition }}</dd>
      </dl>
      <dl class="goods_info">
        <dt>거래방법</dt>
        <dd>{{ goods.delivery }}</dd>
      </dl>
      <dl *ngIf="goods.contact" class="goods_info">
        <dt>연락처</dt>
        <dd>{{ goods.contact }}</dd>
      </dl>
    </div>

    <div class="goods_detail">
      <p [innerHTML]="goods.desc"></p>
    </div>

    <div *ngIf="goods.images.length > 1">
      <div class="more-thumbs-wrap">
        <div class="more-thumbs">
          <ng-container *ngIf="!moreImages">
            <div *ngFor="let image of goods.images" [class]="'thumbs-' + (goods.images.length - 1)">
              <div class="thumb-cover" [style.backgroundImage]="'url(' + image + ')'"></div>
            </div>
          </ng-container>
        </div>
        <ng-container *ngIf="moreImages">
          <div *ngFor="let image of goods.images" class="more-thumbs-full">
            <img [src]="image" width="100%" alt="">
          </div>
        </ng-container>
      </div>
      <div class="toggle-button" *ngIf="!moreImages">
        <button type="button" (click)="onClickMoreImages()">이미지 펼쳐보기</button>
      </div>
      <div class="toggle-button" *ngIf="moreImages">
        <button type="button" (click)="onClickMoreImages()">이미지 접기</button>
      </div>
    </div>
    <div class="author_info">
      <span class="author_thumb" [style.backgroundImage]="'url(' + goods.user.photoURL + ')'"></span>
      <p><strong>{{ goods.user.displayName }}</strong>님이 판매중입니다.</p>
      <div class="author_introduce">{{ goods.user.desc }}</div>
      <div class="other_goods">
        <!-- <h4><strong>{{ goods.user.displayName }}</strong>님의 다른 상품</h4> -->
        <ul class="other_goods_list">
          <li *ngFor="let goods of otherGoods$ | async">
            <div class="other_goods_item">
              <a [routerLink]="['/', market, 'goods', goods.id]" (click)="onClickOtherGoods(goods)">
                <div class="other_goods_thumb" [style.backgroundImage]="'url(' + goods.images[0] +')'"></div>
              </a>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </section>
  <div *ngIf="(comments$ | async) as comments" class="comment">
    <div class="comment_header">
      <h4>댓글 <strong>{{ comments.length }}</strong>개</h4>
    </div>
    <p *ngIf="comments.length === 0" class="comment-nothing">
      아직 댓글이 없습니다.<br>
      첫 댓글을 입력해 보세요!
    </p>
    <ul class="comment_list">
      <li *ngFor="let comment of comments" [attr.data-id]="comment.id" class="comment_item">
        <div>
          <span class="comment_thumb" [style.backgroundImage]="'url(' + comment.user.photoURL + ')'"></span>
          <div class="comment_content">
            <strong class="nickname">
              {{ comment.user.displayName }}
              <span *ngIf="comment.userRef.id === goods.userRef.id">판매자</span>
            </strong>
            <p>{{ comment.body }}</p>
          </div>
          <div class="comment_function">
            <ng-container *ngIf="commentAuthority(comment)">
              <button type="button" (click)="onClickDeleteComment(comment)" style="border:0">삭제</button>  &middot;
            </ng-container>
            <span class="created">{{ comment.created | fsTimestamp | distanceInWordsToNow }} 전</span>
          </div>
        </div>
      </li>
    </ul>
    <div class="comment_form">
      <form [formGroup]="commentForm" (ngSubmit)="onCommentSubmit()">
        <textarea name="body" formControlName="body"
                  maxlength="500" class="textarea"></textarea>
        <button type="submit"
                [disabled]="commentForm.invalid"
                [ngClass]="{ button: true, disabled: commentForm.invalid }">댓글 입력</button>
      </form>
    </div>
  </div>
</div>
